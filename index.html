<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Brasil em Foco - Notícias</title>
<style>
  :root {
    --bg-light: #f5f5f5;
    --bg-dark: #121212;
    --text-light: #222;
    --text-dark: #eee;
    --card-bg-light: #fff;
    --card-bg-dark: #1e1e1e;
    --primary-color: #e60000;
    --link-color-light: #007bff;
    --link-color-dark: #3399ff;
  }
  body {
    font-family: Arial, sans-serif;
    max-width: 900px;
    margin: auto;
    padding: 15px;
    background: var(--bg-light);
    color: var(--text-light);
    transition: background-color 0.3s, color 0.3s;
  }
  body.dark {
    background: var(--bg-dark);
    color: var(--text-dark);
  }
  h1 {
    text-align: center;
    margin-bottom: 25px;
    color: var(--primary-color);
  }
  #temaToggle {
    cursor: pointer;
    padding: 8px 15px;
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: 5px;
    font-weight: bold;
    position: fixed;
    top: 15px;
    right: 15px;
    z-index: 100;
  }
  nav {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 30px;
    flex-wrap: wrap;
  }
  nav button {
    background: none;
    border: 2px solid var(--primary-color);
    color: var(--primary-color);
    padding: 8px 15px;
    border-radius: 20px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
  }
  nav button.active,
  nav button:hover {
    background-color: var(--primary-color);
    color: white;
  }
  nav button:focus {
    outline: none;
  }
  #noticias {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  .noticia {
    background: var(--card-bg-light);
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgb(0 0 0 / 0.1);
    transition: background-color 0.3s;
  }
  body.dark .noticia {
    background: var(--card-bg-dark);
    box-shadow: 0 4px 8px rgb(255 255 255 / 0.1);
  }
  .noticia img {
    max-width: 100%;
    border-radius: 8px;
    margin-bottom: 10px;
  }
  .noticia h2 {
    margin-top: 0;
    margin-bottom: 10px;
  }
  .noticia p {
    margin-bottom: 12px;
  }
  .noticia a {
    color: var(--link-color-light);
    font-weight: bold;
    text-decoration: none;
  }
  body.dark .noticia a {
    color: var(--link-color-dark);
  }
  .noticia a:hover {
    text-decoration: underline;
  }
  @media(max-width:600px) {
    nav {
      gap: 8px;
    }
    nav button {
      padding: 6px 12px;
      font-size: 14px;
    }
  }
</style>
</head>
<body>
  <h1>Brasil em Foco</h1>
  <button id="temaToggle" aria-label="Alternar tema">Modo Escuro</button>

  <nav aria-label="Categorias de notícias">
    <button class="active" data-categoria="general">Geral</button>
    <button data-categoria="politics">Política</button>
    <button data-categoria="sports">Esportes</button>
    <button data-categoria="technology">Tecnologia</button>
    <button data-categoria="health">Saúde</button>
  </nav>

  <div id="noticias">
    <!-- Notícias aparecem aqui -->
  </div>

<script>
  const apiKey = '6bee1ef218774403b522dc6c433abda0';
  const noticiasContainer = document.getElementById('noticias');
  const botoesCategorias = document.querySelectorAll('nav button');
  const temaToggle = document.getElementById('temaToggle');

  // Função para formatar data para YYYY-MM-DD
  function getDateISOString(date) {
    return date.toISOString().split('T')[0];
  }

  // Função que cria o card de notícia
  function criarNoticiaCard(article) {
    const div = document.createElement('div');
    div.classList.add('noticia');
    div.innerHTML = `
      <h2>${article.title}</h2>
      ${article.urlToImage ? `<img src="${article.urlToImage}" alt="Imagem notícia">` : ''}
      <p>${article.description || ''}</p>
      <a href="${article.url}" target="_blank" rel="noopener noreferrer">Leia mais</a>
    `;
    return div;
  }

  async function carregarNoticias(categoria = 'general') {
    noticiasContainer.innerHTML = '<p>Carregando notícias...</p>';
    try {
      const hoje = new Date();
      const primeiroDiaMes = new Date(hoje.getFullYear(), hoje.getMonth(), 1);
      const fromDate = getDateISOString(primeiroDiaMes);
      const toDate = getDateISOString(hoje);

      // Termos para categorias (em pt ou inglês dependendo do que a API aceita)
      const termosCategoria = {
        general: 'brasil',
        politics: 'política',
        sports: 'esportes',
        technology: 'tecnologia',
        health: 'saúde'
      };

      const termoBusca = termosCategoria[categoria] || 'brasil';

      const url = `https://newsapi.org/v2/everything?q=${encodeURIComponent(termoBusca)}&from=${fromDate}&to=${toDate}&language=pt&sortBy=publishedAt&pageSize=30&apiKey=${apiKey}`;

      const response = await fetch(url);
      const data = await response.json();

      if(data.status !== 'ok') {
        noticiasContainer.innerHTML = `<p>Erro ao carregar notícias: ${data.message || 'Erro desconhecido'}</p>`;
        return;
      }

      if(data.articles.length === 0) {
        noticiasContainer.innerHTML = '<p>Não há notícias para esta categoria neste mês.</p>';
        return;
      }

      noticiasContainer.innerHTML = '';
      data.articles.forEach(article => {
        noticiasContainer.appendChild(criarNoticiaCard(article));
      });

    } catch (error) {
      noticiasContainer.innerHTML = '<p>Erro ao buscar notícias.</p>';
      console.error(error);
    }
  }

  // Trocar categoria ao clicar
  botoesCategorias.forEach(btn => {
    btn.addEventListener('click', () => {
      botoesCategorias.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      carregarNoticias(btn.dataset.categoria);
    });
  });

  // Tema claro/escuro
  temaToggle.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    if(document.body.classList.contains('dark')) {
      temaToggle.textContent = 'Modo Claro';
    } else {
      temaToggle.textContent = 'Modo Escuro';
    }
  });

  // Carrega as notícias gerais ao iniciar
  carregarNoticias();
</script>
</body>
</html>
